<div class="bg-white rounded-xl sm:rounded-2xl shadow-md border border-orange-100 overflow-hidden"
     id="task-{{ task_id }}"
     hx-get="/api/stories/task/{{ task_id }}"
     hx-trigger="every 2s"
     hx-swap="outerHTML">
    <!-- Animated gradient placeholder for image -->
    <div class="h-36 sm:h-40 bg-gradient-to-br from-primary-100 via-accent-100 to-primary-100 flex items-center justify-center relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-shimmer"></div>
        <div class="flex flex-col items-center gap-2 z-10">
            <svg class="animate-spin h-8 w-8 text-primary-500" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"/>
            </svg>
            <span class="text-xs font-bold text-primary-600 bg-white/80 px-3 py-1 rounded-full">Creating story...</span>
        </div>
    </div>
    <div class="p-4 sm:p-5">
        <div class="flex flex-wrap items-center gap-1.5 sm:gap-2 mb-2">
            <span class="px-2 py-0.5 bg-primary-100 text-primary-700 rounded-full text-xs font-bold">
                ‚≠ê Level {{ level }}
            </span>
            {% if theme %}
            <span class="px-2 py-0.5 bg-accent-50 text-accent-600 rounded-full text-xs font-semibold">{{ theme }}</span>
            {% endif %}
        </div>
        <div class="space-y-2">
            <div class="h-5 bg-gray-100 rounded-lg w-3/4 animate-pulse"></div>
            <div class="h-4 bg-gray-100 rounded-lg w-full animate-pulse"></div>
            <div class="h-4 bg-gray-100 rounded-lg w-5/6 animate-pulse"></div>
        </div>
        <div class="mt-4">
            <div class="h-10 bg-gray-100 rounded-xl w-full sm:w-32 animate-pulse"></div>
        </div>
    </div>

    <style>
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        .animate-shimmer { animation: shimmer 2s ease-in-out infinite; }
    </style>
</div>
